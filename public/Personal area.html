<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background-color: gray; // Задаем серый цвет фона
        }

        .container {
            display: flex; // Используем flexbox для расположения элементов
            justify-content: center; // Выравниваем по центру по горизонтали
            flex-direction: column; // Располагаем элементы в колонку
            align-items: center; // Выравниваем по центру по вертикали
            height: 100vh; // Задаем высоту контейнера по высоте окна просмотра
            margin-top: -275px; // Корректируем положение контейнера
        }

        .text {
            text-align: center; // Выравниваем текст по центру
            margin-top: 5px; // Добавляем небольшой отступ сверху
            font-weight: bold; // Задаем жирный шрифт
            font-size: 1.2em; // Задаем размер шрифта
        }

        .image-container {
            position: relative; // Устанавливаем относительное позиционирование для контейнера изображения
            text-align: center; // Выравниваем содержимое по центру
            display: inline-block; // Отображаем блок как строчный элемент
        }

        .image {
            margin-bottom: 5px; // Добавляем отступ снизу
            border-radius: 50%; // Задаем скругленные углы для круглого изображения
            position: relative; // Устанавливаем относительное позиционирование
        }

        .second-image {
            display: none; // Скрываем второе изображение по умолчанию
            position: absolute; // Позиционируем абсолютно
            bottom: 100px; // Располагаем снизу с небольшим отступом
            right: -10px; // Располагаем справа с небольшим отступом
            margin: 5px; // Добавляем отступы
            border-radius: 50%; // Задаем скругленные углы
            cursor: pointer; // Делаем курсор указателем при наведении
        }

        .edit-nickname-image {
            display: none; // Скрываем изображение для изменения никнейма по умолчанию
            cursor: pointer; // Делаем курсор указателем при наведении
            margin-top: -55px; // Располагаем немного выше
            margin-right: -120px; // Располагаем немного правее
        }

        .settings-image {
            position: absolute; // Позиционируем абсолютно
            top: 10px; // Располагаем сверху с небольшим отступом
            right: 10px; // Располагаем справа с небольшим отступом
        }

        #menu {
            display: block; // Отображаем меню блоком
            position: fixed; // Позиционируем фиксированно
            top: 150px; // Располагаем сверху с определенным отступом
            right: 0; // Располагаем справа
            width: 100px; // Задаем ширину
            height: 100px; // Задаем высоту
            background-color: white; // Задаем белый цвет фона
        }

        #text-menu {
            display: none; // Скрываем текстовое меню по умолчанию
            position: fixed; // Позиционируем фиксированно
            top: 50%; // Располагаем сверху по центру экрана
            left: 50%; // Располагаем слева по центру экрана
            transform: translate(-50%, -50%); // Центрируем относительно себя
            background-color: white; // Задаем белый цвет фона
            text-align: center; // Выравниваем содержимое по центру
            padding: 10px; // Добавляем внутренние отступы
        }
    </style>
    <script>
        function openMenu(event) {
            var menu = document.getElementById('menu');
            menu.style.display = 'block'; // Отображаем меню
            event.stopPropagation(); // Остановить всплытие события
            document.addEventListener("click", closeMenu); // Добавляем обработчик для закрытия меню
            menu.addEventListener("click", function(event) {
                event.stopPropagation(); // Остановить всплытие события внутри меню
            });
        }

        function closeMenu() {
            var menu = document.getElementById('menu');
            menu.style.display = 'none'; // Скрываем меню
            document.removeEventListener("click", closeMenu); // Удаляем обработчик закрытия меню
        }

        function changePersonalAreaImage() {
            var fileUpload = document.getElementById("file-upload");
            fileUpload.click(); // Программное нажатие на кнопку загрузки файла
        }

        function handleImageUpload(event) {
            var file = event.target.files[0]; // Получаем выбранный файл
            var personalAreaImage = document.getElementById('personal-area-image');
            personalAreaImage.src = URL.createObjectURL(file); // Устанавливаем src для изображения
            var secondImage = document.querySelector('.second-image');
            secondImage.style.display = personalAreaImage.src ? 'none' : 'inline-block'; // Отображаем второе изображение, если основное изображение не выбрано
        }

        function openTextMenu() {
            var textMenu = document.getElementById('text-menu');
            textMenu.style.display = 'block'; // Отображаем текстовое меню
        }

        function saveText() {
            var textInput = document.getElementById('text-input');
            var textElement = document.getElementById('text');
            textElement.innerText = textInput.value; // Заменяем текст на введенный в поле ввода
            var textMenu = document.getElementById('text-menu');
            textMenu.style.display = 'none'; // Скрываем текстовое меню
            var editNicknameImage = document.querySelector('.edit-nickname-image');
            editNicknameImage.style.display = 'none'; // Скрываем изображение для изменения никнейма
        }

        function showImagesAndText() {
            var secondImage = document.querySelector('.second-image');
            secondImage.style.display = 'inline-block'; // Отображаем второе изображение
            secondImage.style.position = 'absolute'; // Позиционируем абсолютно
            secondImage.style.bottom = '45px'; // Располагаем снизу с определенным отступом
            secondImage.style.right = '15px'; // Располагаем справа с определенным отступом

            var editNicknameImage = document.querySelector('.edit-nickname-image');
            editNicknameImage.style.display = 'inline-block'; // Отображаем изображение для изменения никнейма
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="image-container">
            <img src="png-clipart-user-profile-computer-software-internet-bot-user-miscellaneous-service.png" alt="Personal Area Image" width="100" height="100" id="personal-area-image" class="image">
            <div class="second-image">
                <img src="543894-fotoapparat-dlya-detey-36.jpg" alt="Second Image" width="30" height="25" onclick="changePersonalAreaImage()">
            </div>
            <div class="text" id="text">Пользователь</div>
            <img src="https://raw.githubusercontent.com/Tema5673/tg-web-app-music/master/public/png-transparent-writing-symbol-computer-icons-pen-symbol-miscellaneous-angle-pencil.png" alt="Изменить никнейм" width="20" height="20" class="edit-nickname-image" onclick="openTextMenu()">
        </div>
    </div>
    <img src="settings_gear_options_1630709.jpg" alt="Настройки" width="30" height="30" class="settings-image" onclick="openMenu(event)">
    <div id="menu" style="display: none;">
        <button style="background-color: lightgray;" onclick="showImagesAndText()">Аккаунт</button>
    </div>
    <div id="text-menu" style="display: none;">
        <input type="text" id="text-input" placeholder="Введите новый никнейм">
        <button onclick="saveText()">Сохранить</button>
    </div>
    <input type="file" id="file-upload" style="display: none;" accept="image/*" onchange="handleImageUpload(event)">
</body>
</html>
